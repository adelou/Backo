{% extends 'AppAdminBundle:Layout:admin.html.twig' %}
{% form_theme form 'AppAdminBundle:Form:fields.html.twig' %}

{% block stylesheets %}
    <link href="{{ asset('bundles/appadmin/css/dropzone.css') }}" rel="stylesheet">
    {{ parent() }}
{% endblock %}

{% block body %}
    <div class="row">
        <div class="col-lg-12">
            <section class="panel">
                <header class="panel-heading">
                    Ajouter des m√©dias
                </header>
                <div class="panel-body">
                    <form id="myDropzone" action="{{ path('media_create') }}" class="dropzone">
                        <div class="fallback">
                            <input name="file" type="file" multiple />
                        </div>
                    </form>
                </div>
            </section>
            <a href="{{ path('media') }}" class="btn btn-shadow btn-default"><i class="fa fa-arrow-left"></i> Retour</a>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/appadmin/js/dropzone.js') }}" ></script>
    <script>

        Dropzone.options.myDropzone = {
           /* init: function() {
                this.on("addedfile", function(file) {

                    // Create the remove button
                    var removeButton = Dropzone.createElement("<button>Remove file</button>");


                    // Capture the Dropzone instance as closure.
                    var _this = this;

                    // Listen to the click event
                    removeButton.addEventListener("click", function(e) {
                        // Make sure the button click doesn't submit the form:
                        e.preventDefault();
                        e.stopPropagation();

                        // Remove the file preview.
                        _this.removeFile(file);
                        // If you want to the delete the file on the server as well,
                        // you can do the AJAX request here.
                    });

                    // Add the button to the file preview element.
                    file.previewElement.appendChild(removeButton);
                });
            }*/
        };

    </script>
{% endblock %}
